"use strict";(self.webpackChunkmidjourney_proxy_admin=self.webpackChunkmidjourney_proxy_admin||[]).push([[502],{12154:function(ie,P,t){t.r(P),t.d(P,{default:function(){return ne}});var R=t(97857),U=t.n(R),D=t(15009),y=t.n(D),M=t(99289),O=t.n(M),G=t(5574),S=t.n(G),L=t(27986),F=t(76772),C=t(66309),J=t(38703),Q=t(83062),V=t(95715),A=t(74330),W=t(4393),d=t(26412),q=t(86250),e=t(85893),_=function(b){var i=b.record,o=(0,F.useIntl)(),N=sessionStorage.getItem("mj-image-prefix")||"",B=function(s){var v="default";return s=="NOT_START"?v="default":s=="SUBMITTED"?v="lime":s=="MODAL"?v="warning":s=="IN_PROGRESS"?v="processing":s=="FAILURE"?v="error":s=="SUCCESS"?v="success":s=="CANCEL"&&(v="magenta"),(0,e.jsx)(C.Z,{color:v,children:i.displays.status})},I=function(s){var v=0;s&&s.indexOf("%")>0&&(v=parseInt(s.substring(0,s.indexOf("%"))));var T="normal";return i.status=="SUCCESS"?T="success":i.status=="FAILURE"&&(T="exception"),(0,e.jsx)("div",{style:{width:200},children:(0,e.jsx)(J.Z,{percent:v,status:T})})},x=function(s){return!s||s.length<30?s:(0,e.jsx)(Q.Z,{title:s,children:s.substring(0,30)+"..."})},k=function(s){return s&&(0,e.jsx)(V.Z,{width:200,src:N+s,placeholder:(0,e.jsx)(A.Z,{tip:"Loading",size:"large"})})},E=function(s){return s&&(0,e.jsx)("video",{width:"200",controls:!0,src:N+s,placeholder:(0,e.jsx)(A.Z,{tip:"Loading",size:"large"})})},$=function(s){return s=="NIJI_JOURNEY"?(0,e.jsx)(C.Z,{color:"green",children:"niji\u30FBjourney"}):s=="INSIGHT_FACE"||s=="FACE_SWAP"||s=="FACE_SWAP_VIDEO"?(0,e.jsx)(C.Z,{color:"volcano",children:"InsightFace"}):s=="MID_JOURNEY"?(0,e.jsx)(C.Z,{color:"blue",children:"Midjourney"}):"-"},z=function(s){if(!(s==null||!s))return(0,e.jsx)(C.Z,{color:"green",children:o.formatMessage({id:"pages.yes"})})};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(W.Z,{type:"inner",title:o.formatMessage({id:"pages.account.basicInfo"}),style:{margin:"10px"},children:(0,e.jsxs)(d.Z,{column:2,children:[(0,e.jsx)(d.Z.Item,{label:"ID",children:i.id}),(0,e.jsx)(d.Z.Item,{label:o.formatMessage({id:"pages.task.type"}),children:i.displays.action}),(0,e.jsx)(d.Z.Item,{label:o.formatMessage({id:"pages.task.status"}),children:B(i.status)}),(0,e.jsx)(d.Z.Item,{label:o.formatMessage({id:"pages.task.progress"}),children:I(i.progress)}),(0,e.jsx)(d.Z.Item,{label:o.formatMessage({id:"pages.task.prompt"}),children:x(i.prompt)}),(0,e.jsx)(d.Z.Item,{label:o.formatMessage({id:"pages.task.promptEn"}),children:x(i.promptEn)}),(0,e.jsx)(d.Z.Item,{label:o.formatMessage({id:"pages.task.description"}),children:x(i.description)}),(0,e.jsx)(d.Z.Item,{label:o.formatMessage({id:"pages.task.submitTime"}),children:i.displays.submitTime}),(0,e.jsx)(d.Z.Item,{label:o.formatMessage({id:"pages.task.startTime"}),children:i.displays.startTime}),(0,e.jsx)(d.Z.Item,{label:o.formatMessage({id:"pages.task.finishTime"}),children:i.displays.finishTime}),(0,e.jsx)(d.Z.Item,{label:o.formatMessage({id:"pages.task.failReason"}),children:x(i.failReason)}),(0,e.jsx)(d.Z.Item,{label:o.formatMessage({id:"pages.task.state"}),children:x(i.state)}),i.action==="SWAP_VIDEO_FACE"?(0,e.jsx)(d.Z.Item,{label:o.formatMessage({id:"pages.task.video"}),children:(0,e.jsx)(q.Z,{vertical:!0,children:E(i.imageUrl)})}):(0,e.jsx)(d.Z.Item,{label:o.formatMessage({id:"pages.task.image"}),children:k(i.imageUrl)})]})}),(0,e.jsx)(W.Z,{type:"inner",title:o.formatMessage({id:"pages.task.extendedInfo"}),style:{margin:"10px"},children:(0,e.jsxs)(d.Z,{column:2,children:[(0,e.jsx)(d.Z.Item,{label:o.formatMessage({id:"pages.task.botType"}),children:$(i.botType)}),(0,e.jsx)(d.Z.Item,{label:"Nonce",children:i.nonce}),(0,e.jsx)(d.Z.Item,{label:o.formatMessage({id:"pages.account.channelId"}),children:i.properties.discordInstanceId}),(0,e.jsx)(d.Z.Item,{label:o.formatMessage({id:"pages.task.instanceId"}),children:i.properties.discordInstanceId}),(0,e.jsx)(d.Z.Item,{label:"Hash",children:i.properties.messageHash}),(0,e.jsx)(d.Z.Item,{label:o.formatMessage({id:"pages.task.messageContent"}),children:x(i.properties.messageContent)}),(0,e.jsx)(d.Z.Item,{label:o.formatMessage({id:"pages.task.finalPrompt"}),children:x(i.properties.finalPrompt)}),(0,e.jsx)(d.Z.Item,{label:o.formatMessage({id:"pages.task.finalPromptZh"}),children:x(i.promptCn||"-")}),(0,e.jsx)(d.Z.Item,{label:o.formatMessage({id:"pages.task.actionId"}),children:x(i.properties.custom_id||"-")}),(0,e.jsx)(d.Z.Item,{label:o.formatMessage({id:"pages.task.modalConfirm"}),children:z(i.properties.needModel)||"-"}),(0,e.jsx)(d.Z.Item,{label:o.formatMessage({id:"pages.task.imageSeed"}),children:i.seed||"-"}),(0,e.jsx)(d.Z.Item,{label:o.formatMessage({id:"pages.task.notifyHook"}),children:x(i.properties.notifyHook||"-")}),(0,e.jsx)(d.Z.Item,{label:o.formatMessage({id:"pages.task.ip"}),children:i.clientIp||"-"})]})})]})},ee=_,X=t(66927),te=t(82061),ae=t(90930),le=t(51967),se=t(53025),a=t(16568),c=t(86738),u=t(83622),r=t(67294),h=function(){var b=(0,r.useState)(!1),i=S()(b,2),o=i[0],N=i[1],B=(0,r.useState)({}),I=S()(B,2),x=I[0],k=I[1],E=(0,r.useState)(""),$=S()(E,2),z=$[0],Z=$[1],s=(0,r.useState)({}),v=S()(s,2),T=v[0],oe=v[1],pe=(0,r.useState)(1e3),de=S()(pe,2),he=de[0],ve=de[1],Ie=se.Z.useForm(),xe=S()(Ie,1),je=xe[0],m=(0,F.useIntl)(),Se=sessionStorage.getItem("mj-image-prefix")||"",ye=a.ZP.useNotification(),ce=S()(ye,2),ue=ce[0],Me=ce[1],ge=(0,r.useRef)(),Ce=function(){k({}),oe({}),N(!1)},Ee=function(l,n,g,f){je.resetFields(),Z(l),k(n),oe(g),ve(f),N(!0)},Ze=function(){var p=O()(y()().mark(function l(n){var g,f;return y()().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.prev=0,j.next=3,(0,X._5)(n);case 3:g=j.sent,g.success?(ue.success({message:"success",description:m.formatMessage({id:"pages.task.deleteSuccess"})}),(f=ge.current)===null||f===void 0||f.reload()):ue.error({message:"error",description:g.message}),j.next=10;break;case 7:j.prev=7,j.t0=j.catch(0),console.error(j.t0);case 10:return j.prev=10,j.finish(10);case 12:case"end":return j.stop()}},l,null,[[0,7,10,12]])}));return function(n){return p.apply(this,arguments)}}(),be=(0,r.useState)(!0),fe=S()(be,2),re=fe[0],Te=fe[1],me=function(){Te(!1)},Ae=function(l){return l&&(0,e.jsx)("video",{width:"200",controls:!0,src:Se+l,placeholder:(0,e.jsx)(A.Z,{tip:"Loading",size:"large"})})},Oe=[{title:"ID",dataIndex:"id",width:160,align:"center",fixed:"left",render:function(l,n){return(0,e.jsx)("a",{onClick:function(){return Ee(m.formatMessage({id:"pages.task.info"}),(0,e.jsx)(ee,{record:n}),null,1100)},children:l})}},{title:m.formatMessage({id:"pages.task.type"}),dataIndex:"action",width:140,align:"center",request:function(){var p=O()(y()().mark(function n(){return y()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.abrupt("return",[{label:"Imagine",value:"IMAGINE"},{label:"Upscale",value:"UPSCALE"},{label:"Variation",value:"VARIATION"},{label:"Zoom",value:"ZOOM"},{label:"Pan",value:"PAN"},{label:"Describe",value:"DESCRIBE"},{label:"Blend",value:"BLEND"},{label:"Shorten",value:"SHORTEN"},{label:"SwapFace",value:"SWAP_FACE"},{label:"SwapVideoFace",value:"SWAP_VIDEO_FACE"},{label:"Video",value:"VIDEO"},{label:"VideoExtend",value:"VIDEO_EXTEND"}]);case 1:case"end":return f.stop()}},n)}));function l(){return p.apply(this,arguments)}return l}(),render:function(l,n){return n.displays.action}},{title:m.formatMessage({id:"pages.task.preview"}),dataIndex:"imageUrl",width:80,align:"center",hideInSearch:!0,render:function(l,n,g){return n.action==="SWAP_VIDEO_FACE"||n.action==="VIDEO"||n.action==="VIDEO_EXTEND"?n.thumbnailUrl&&(0,e.jsx)(V.Z,{style:{borderRadius:0,maxWidth:120,objectFit:"cover",cursor:"pointer"},height:60,src:n.thumbnailUrl,preview:!1,onClick:function(){window.open(n.imageUrl)},loading:"lazy",onLoad:me,placeholder:(0,e.jsx)("div",{style:{width:120,height:60,display:"flex",alignItems:"center",justifyContent:"center"},children:(0,e.jsx)(A.Z,{spinning:re})})},g):(n.thumbnailUrl||n.imageUrl)&&(0,e.jsx)(V.Z.PreviewGroup,{items:n.images||[],children:(0,e.jsx)(V.Z,{style:{borderRadius:0,maxWidth:120,objectFit:"cover"},height:60,src:n.thumbnailUrl||n.imageUrl,preview:{src:n.imageUrl,mask:(0,e.jsx)(A.Z,{spinning:re})},loading:"lazy",onLoad:me,placeholder:(0,e.jsx)("div",{style:{width:120,height:60,display:"flex",alignItems:"center",justifyContent:"center"},children:(0,e.jsx)(A.Z,{spinning:re})})},g)})}},{title:m.formatMessage({id:"pages.task.instanceId"}),dataIndex:"instanceId",width:180,align:"center",render:function(l,n){return n.properties.discordInstanceId}},{title:m.formatMessage({id:"pages.task.submitTime"}),dataIndex:"submitTime",width:160,hideInSearch:!0,align:"center",render:function(l,n){return n.displays.submitTime}},{title:m.formatMessage({id:"pages.task.status"}),dataIndex:"status",width:90,align:"center",request:function(){var p=O()(y()().mark(function n(){return y()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.abrupt("return",[{label:m.formatMessage({id:"pages.task.NOT_START"}),value:"NOT_START"},{label:m.formatMessage({id:"pages.task.SUBMITTED"}),value:"SUBMITTED"},{label:m.formatMessage({id:"pages.task.MODAL"}),value:"MODAL"},{label:m.formatMessage({id:"pages.task.IN_PROGRESS"}),value:"IN_PROGRESS"},{label:m.formatMessage({id:"pages.task.FAILURE"}),value:"FAILURE"},{label:m.formatMessage({id:"pages.task.SUCCESS"}),value:"SUCCESS"},{label:m.formatMessage({id:"pages.task.CANCEL"}),value:"CANCEL"}]);case 1:case"end":return f.stop()}},n)}));function l(){return p.apply(this,arguments)}return l}(),render:function(l,n){var g="default";return l=="NOT_START"?g="default":l=="SUBMITTED"?g="lime":l=="MODAL"?g="warning":l=="IN_PROGRESS"?g="processing":l=="FAILURE"?g="error":l=="SUCCESS"?g="success":l=="CANCEL"&&(g="magenta"),(0,e.jsx)(C.Z,{color:g,children:n.displays.status})}},{title:m.formatMessage({id:"pages.task.progress"}),dataIndex:"progress",width:130,showInfo:!1,hideInSearch:!0,render:function(l,n){var g=0;l&&l.indexOf("%")>0&&(g=parseInt(l.substring(0,l.indexOf("%"))));var f="normal";return n.status=="SUCCESS"?f="success":n.status=="FAILURE"&&(f="exception"),(0,e.jsx)(J.Z,{percent:g,status:f,size:"small"})}},{title:m.formatMessage({id:"pages.task.description"}),dataIndex:"description",width:250,ellipsis:!0},{title:m.formatMessage({id:"pages.task.failReason"}),dataIndex:"failReason",width:220,ellipsis:!0},{title:m.formatMessage({id:"pages.operation"}),dataIndex:"operation",width:100,key:"operation",fixed:"right",align:"center",hideInSearch:!0,render:function(l,n){return(0,e.jsx)(c.Z,{title:m.formatMessage({id:"pages.task.delete"}),description:m.formatMessage({id:"pages.task.deleteTitle"}),onConfirm:function(){return Ze(n.id)},children:(0,e.jsx)(u.ZP,{danger:!0,icon:(0,e.jsx)(te.Z,{})})})}}];return(0,e.jsxs)(ae._z,{children:[Me,(0,e.jsx)(W.Z,{children:(0,e.jsx)(le.Z,{columns:Oe,scroll:{x:1e3},search:{defaultCollapsed:!0},pagination:{pageSize:10,showQuickJumper:!1,showSizeChanger:!1},rowKey:"id",actionRef:ge,request:function(){var p=O()(y()().mark(function l(n){var g,f,K;return y()().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return w.next=2,(0,X.Pn)(U()(U()({},n),{},{pageNumber:n.current-1}));case 2:return g=w.sent,f=g.list.map(function(H){return H.imageUrl||""}).filter(function(H){return H!=""}),K=g.list,K.forEach(function(H,Re){H.images=f}),w.abrupt("return",{data:K,total:g.pagination.total,success:!0});case 7:case"end":return w.stop()}},l)}));return function(l){return p.apply(this,arguments)}}()})}),(0,e.jsx)(L.Z,{title:z,modalVisible:o,hideModal:Ce,modalContent:x,footer:T,modalWidth:he})]})},ne=h},27986:function(ie,P,t){var R=t(17788),U=t(85893),D=function(M){var O=M.title,G=M.modalVisible,S=M.hideModal,L=M.modalContent,F=M.footer,C=M.modalWidth;return(0,U.jsx)(R.Z,{title:O,open:G,onCancel:S,footer:F,width:C,children:L})};P.Z=D},86250:function(ie,P,t){t.d(P,{Z:function(){return se}});var R=t(67294),U=t(93967),D=t.n(U),y=t(98423),M=t(98065),O=t(53124),G=t(83559),S=t(83262);const L=["wrap","nowrap","wrap-reverse"],F=["flex-start","flex-end","start","end","center","space-between","space-around","space-evenly","stretch","normal","left","right"],C=["center","start","end","flex-start","flex-end","self-start","self-end","baseline","normal","stretch"],J=(a,c)=>{const u=c.wrap===!0?"wrap":c.wrap;return{[`${a}-wrap-${u}`]:u&&L.includes(u)}},Q=(a,c)=>{const u={};return C.forEach(r=>{u[`${a}-align-${r}`]=c.align===r}),u[`${a}-align-stretch`]=!c.align&&!!c.vertical,u},V=(a,c)=>{const u={};return F.forEach(r=>{u[`${a}-justify-${r}`]=c.justify===r}),u};function A(a,c){return D()(Object.assign(Object.assign(Object.assign({},J(a,c)),Q(a,c)),V(a,c)))}var W=A;const d=a=>{const{componentCls:c}=a;return{[c]:{display:"flex",margin:0,padding:0,"&-vertical":{flexDirection:"column"},"&-rtl":{direction:"rtl"},"&:empty":{display:"none"}}}},q=a=>{const{componentCls:c}=a;return{[c]:{"&-gap-small":{gap:a.flexGapSM},"&-gap-middle":{gap:a.flexGap},"&-gap-large":{gap:a.flexGapLG}}}},e=a=>{const{componentCls:c}=a,u={};return L.forEach(r=>{u[`${c}-wrap-${r}`]={flexWrap:r}}),u},_=a=>{const{componentCls:c}=a,u={};return C.forEach(r=>{u[`${c}-align-${r}`]={alignItems:r}}),u},ee=a=>{const{componentCls:c}=a,u={};return F.forEach(r=>{u[`${c}-justify-${r}`]={justifyContent:r}}),u},X=()=>({});var te=(0,G.I$)("Flex",a=>{const{paddingXS:c,padding:u,paddingLG:r}=a,h=(0,S.IX)(a,{flexGapSM:c,flexGap:u,flexGapLG:r});return[d(h),q(h),e(h),_(h),ee(h)]},X,{resetStyle:!1}),ae=function(a,c){var u={};for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&c.indexOf(r)<0&&(u[r]=a[r]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var h=0,r=Object.getOwnPropertySymbols(a);h<r.length;h++)c.indexOf(r[h])<0&&Object.prototype.propertyIsEnumerable.call(a,r[h])&&(u[r[h]]=a[r[h]]);return u},se=R.forwardRef((a,c)=>{const{prefixCls:u,rootClassName:r,className:h,style:ne,flex:Y,gap:b,children:i,vertical:o=!1,component:N="div"}=a,B=ae(a,["prefixCls","rootClassName","className","style","flex","gap","children","vertical","component"]),{flex:I,direction:x,getPrefixCls:k}=R.useContext(O.E_),E=k("flex",u),[$,z,Z]=te(E),s=o!=null?o:I==null?void 0:I.vertical,v=D()(h,r,I==null?void 0:I.className,E,z,Z,W(E,a),{[`${E}-rtl`]:x==="rtl",[`${E}-gap-${b}`]:(0,M.n)(b),[`${E}-vertical`]:s}),T=Object.assign(Object.assign({},I==null?void 0:I.style),ne);return Y&&(T.flex=Y),b&&!(0,M.n)(b)&&(T.gap=b),$(R.createElement(N,Object.assign({ref:c,className:v,style:T},(0,y.Z)(B,["justify","wrap","align"])),i))})}}]);
